{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"summary\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ParticipantList = _resolveComponent(\"ParticipantList\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_cache[0] || (_cache[0] = _createElementVNode(\"h2\", null, \"参与方管理\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"span\", null, \"总数: \" + _toDisplayString($data.summary.total), 1 /* TEXT */), _createElementVNode(\"span\", null, \"在线: \" + _toDisplayString($data.summary.online), 1 /* TEXT */), _createElementVNode(\"span\", null, \"离线: \" + _toDisplayString($data.summary.offline), 1 /* TEXT */)]), _createVNode(_component_ParticipantList, {\n    participants: $data.participants\n  }, null, 8 /* PROPS */, [\"participants\"])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_createElementVNode","_hoisted_1","_toDisplayString","$data","summary","total","online","offline","_createVNode","_component_ParticipantList","participants"],"sources":["D:\\pass\\encryption_co\\src\\views\\CoordinatorParticipants.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h2>参与方管理</h2>\r\n    <div class=\"summary\">\r\n      <span>总数: {{ summary.total }}</span>\r\n      <span>在线: {{ summary.online }}</span>\r\n      <span>离线: {{ summary.offline }}</span>\r\n    </div>\r\n    <ParticipantList :participants=\"participants\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getParticipants } from '@/api/coordinator'\r\nimport ParticipantList from '@/components/ParticipantList.vue'\r\n\r\nexport default {\r\n  name: 'CoordinatorParticipants',\r\n  components: { ParticipantList },\r\n  data() {\r\n    return {\r\n      summary: { total: 0, online: 0, offline: 0 },\r\n      participants: [],\r\n      ws: null\r\n    }\r\n  },\r\n  mounted() {\r\n    this.fetchParticipants()\r\n    this.ws = new WebSocket('ws://26.100.135.52:8080/ws');\r\n    this.ws.onmessage = (event) => {\r\n      const data = JSON.parse(event.data);\r\n      this.handleWsData(data);\r\n    };\r\n  },\r\n  beforeUnmount() {\r\n    if (this.ws) this.ws.close();\r\n  },\r\n  methods: {\r\n    async fetchParticipants() {\r\n      const res = await getParticipants()\r\n      this.summary.total = res.data.total_participants\r\n      this.summary.online = res.data.online_participants\r\n      this.summary.offline = res.data.offline_participants\r\n      this.participants = res.data.participants\r\n    },\r\n    handleWsData() {\r\n      this.fetchParticipants();\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.summary span {\r\n  margin-right: 20px;\r\n  font-weight: bold;\r\n}\r\n</style>\r\n"],"mappings":";;EAGSA,KAAK,EAAC;AAAS;;;uBAFtBC,mBAAA,CAQM,c,0BAPJC,mBAAA,CAAc,YAAV,OAAK,qBACTA,mBAAA,CAIM,OAJNC,UAIM,GAHJD,mBAAA,CAAoC,cAA9B,MAAI,GAAAE,gBAAA,CAAGC,KAAA,CAAAC,OAAO,CAACC,KAAK,kBAC1BL,mBAAA,CAAqC,cAA/B,MAAI,GAAAE,gBAAA,CAAGC,KAAA,CAAAC,OAAO,CAACE,MAAM,kBAC3BN,mBAAA,CAAsC,cAAhC,MAAI,GAAAE,gBAAA,CAAGC,KAAA,CAAAC,OAAO,CAACG,OAAO,iB,GAE9BC,YAAA,CAAgDC,0BAAA;IAA9BC,YAAY,EAAEP,KAAA,CAAAO;EAAY,0C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}